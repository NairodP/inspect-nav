<nav class="navbar">
  <div class="navbar-glow"></div>

  <div class="navbar-content">
    <div class="nav-brand" (click)="gotoHome()">
      <svg
        class="brand-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1062 235"
        preserveAspectRatio="xMidYMid meet"
        role="img"
        aria-label="Inspect"
      >
        <g transform="translate(0,235) scale(0.1,-0.1)">
          <path
            d="M3595 2141 l-370 -6 -81 -33 c-225 -90 -355 -282 -355 -527 -1 -61 6
-123 16 -159 52 -192 212 -340 413 -381 48 -10 130 -15 236 -15 225 0 291 -22
336 -111 27 -51 26 -129 -3 -199 -20 -49 -28 -57 -81 -85 l-60 -30 -320 -2
c-289 -1 -322 -3 -331 -18 -5 -9 -42 -65 -81 -123 -39 -59 -83 -128 -98 -154
l-27 -47 33 -6 c18 -3 231 -4 473 -2 488 4 496 5 625 73 111 58 217 179 257
294 7 19 18 74 25 122 33 246 -78 466 -286 567 -113 55 -153 62 -386 70 -165
6 -213 11 -243 26 -152 72 -140 320 18 380 37 15 90 17 346 19 l303 1 63 95
c34 52 75 113 90 135 33 46 66 106 61 110 -10 8 -250 11 -573 6z"
          />
          <path
            d="M4845 2142 l-230 -2 -64 -93 c-107 -154 -161 -236 -161 -247 0 -6 67
-11 174 -12 l174 -3 -159 -170 c-88 -93 -166 -180 -175 -191 -14 -20 -17 -282
-14 -1116 l0 -67 184 2 c102 1 188 6 192 10 5 5 9 352 9 773 l0 765 250 -3
c244 -3 251 -4 300 -28 36 -18 58 -38 80 -74 28 -46 30 -56 30 -145 0 -87 -3
-101 -28 -143 -15 -26 -41 -57 -58 -69 -43 -30 -128 -49 -225 -49 l-81 0 -29
-42 c-16 -24 -31 -47 -34 -53 -3 -5 -32 -50 -65 -100 -66 -100 -85 -133 -85
-147 0 -6 94 -8 258 -6 201 4 270 8 317 22 166 47 305 160 375 308 47 98 60
158 60 282 2 181 -65 332 -200 452 -62 56 -102 78 -195 110 -95 32 -232 41
-600 36z"
          />
          <path
            d="M6288 2142 l-278 -2 0 -944 0 -943 88 -7 c107 -8 1248 -3 1256 5 5 5
-8 32 -59 117 -5 9 -24 37 -41 62 -17 25 -45 70 -62 101 l-32 56 -107 5 c-60
3 -233 4 -385 2 l-277 -3 2 215 2 214 211 0 211 0 104 157 c57 87 105 166 107
176 3 17 -14 17 -312 15 l-315 -3 -6 24 c-3 13 -3 109 1 213 l7 188 196 0
c108 1 274 2 369 3 l174 2 25 45 c14 25 35 61 45 80 11 19 26 42 33 50 22 26
97 161 92 166 -5 6 -683 10 -1049 6z"
          />
          <path
            d="M8205 2140 c-215 -7 -235 -9 -310 -34 -192 -67 -325 -167 -429 -326
-67 -101 -123 -230 -101 -230 3 0 30 20 60 44 92 76 240 135 440 177 39 8 182
14 410 17 302 3 352 6 367 19 10 9 18 20 18 25 0 4 24 45 53 91 97 148 127
201 119 208 -12 12 -380 17 -627 9z"
          />
          <path
            d="M9165 2142 l-90 -3 -60 -102 c-32 -56 -76 -131 -97 -166 -21 -34 -38
-67 -38 -72 0 -5 99 -9 228 -9 l227 1 80 76 c44 41 91 83 105 92 14 9 54 38
90 65 36 27 89 60 118 73 30 14 50 29 45 33 -8 9 -454 17 -608 12z"
          />
          <path
            d="M678 2130 c-2 -6 -55 -44 -118 -85 -231 -149 -216 -136 -223 -204
-10 -91 -8 -1579 1 -1585 17 -10 199 -17 290 -10 l92 6 0 944 c0 924 0 944
-19 944 -11 0 -21 -5 -23 -10z"
          />
          <path
            d="M960 1184 l0 -956 43 25 c23 14 96 62 162 107 66 45 135 91 153 102
l32 20 0 377 c0 346 -2 382 -19 437 -45 136 -109 341 -115 369 -8 32 7 12 229
-307 66 -94 140 -200 165 -234 25 -34 104 -146 175 -248 72 -103 162 -231 200
-285 39 -54 108 -153 155 -219 84 -120 85 -120 130 -125 59 -6 318 -2 325 5 3
3 7 34 8 69 l2 64 -97 135 c-53 74 -120 168 -150 207 -29 40 -73 102 -98 138
-25 36 -58 83 -75 105 -34 44 -103 140 -204 285 -69 99 -101 144 -171 240 -20
28 -88 122 -150 210 -63 88 -159 222 -213 298 l-100 137 -193 0 -194 0 0 -956z"
          />
          <path
            d="M2403 2021 l-181 -119 -7 -124 c-4 -67 -5 -224 -3 -348 l3 -226 55
-74 c30 -41 60 -82 65 -92 6 -10 66 -95 135 -190 l125 -173 5 60 c3 33 5 339
4 680 -2 749 -2 725 -12 725 -5 0 -90 -54 -189 -119z"
          />
          <path
            d="M9930 2133 c-111 -43 -362 -300 -441 -452 l-29 -55 0 -692 c0 -380 2
-693 5 -696 5 -5 146 83 183 113 7 6 30 20 50 32 66 39 141 98 146 115 3 9 6
76 5 147 0 72 0 358 0 638 l1 507 184 0 185 0 23 32 c39 54 178 292 178 306 0
9 -54 12 -237 11 -131 0 -245 -3 -253 -6z"
          />
          <path
            d="M7780 1661 c-172 -79 -253 -134 -377 -259 -82 -82 -95 -114 -94 -242
1 -477 255 -817 676 -905 52 -11 144 -15 357 -15 l287 0 12 23 c6 12 30 51 54
87 61 94 135 221 135 231 0 11 -15 11 -415 14 -352 3 -372 5 -467 66 -170 109
-258 313 -245 569 10 185 57 318 147 410 27 28 50 53 50 56 0 12 -44 -1 -120
-35z"
          />
        </g>
      </svg>
    </div>

    <div class="nav-main">
      <button class="menu-trigger" [matMenuTriggerFor]="mainMenu">
        <mat-icon>menu</mat-icon>
      </button>
      <mat-menu #mainMenu="matMenu" class="main-nav-menu">
        <ng-container *ngFor="let item of navItems">
          <button
            mat-menu-item
            *ngIf="item.children"
            [matMenuTriggerFor]="subMenu"
            [class.active]="currentNav?.id === item.id"
          >
            <mat-icon class="material-symbols-outlined">{{
              item.icon
            }}</mat-icon>
            <span>{{ item.label }}</span>
          </button>

          <mat-menu #subMenu="matMenu" class="sub-nav-menu">
            <button
              mat-menu-item
              *ngFor="let subItem of item.children"
              [class.active]="currentSubNav?.id === subItem.id"
              (click)="selectSubNav(item, subItem)"
            >
              <mat-icon class="material-symbols-outlined">{{
                subItem.icon
              }}</mat-icon>
              <span>{{ subItem.label }}</span>
            </button>
          </mat-menu>

          <button
            mat-menu-item
            *ngIf="!item.children"
            [class.active]="currentNav?.id === item.id"
            (click)="selectNav(item)"
          >
            <mat-icon class="material-symbols-outlined">{{
              item.icon
            }}</mat-icon>
            <span>{{ item.label }}</span>
          </button>
        </ng-container>
      </mat-menu>

      <div class="nav-separator"></div>

      <div class="selected-nav" *ngIf="currentNav; else defaultNav">
        <div class="selected-icon">
          <mat-icon class="material-symbols-outlined">{{
            currentSubNav?.icon || currentNav.icon
          }}</mat-icon>
        </div>
        <div class="selected-info">
          <span class="selected-label">{{ currentNav.label }}</span>
          <span class="selected-sub" *ngIf="currentSubNav">{{
            currentSubNav.label
          }}</span>
        </div>
      </div>

      <ng-template #defaultNav>
        <div class="default-nav">
          <mat-icon class="material-symbols-outlined">space_dashboard</mat-icon>
          <span>Tableau de bord</span>
        </div>
      </ng-template>
    </div>

    <div class="nav-actions">
      <button class="action-btn kpi-btn" matTooltip="KPI">
        <mat-icon class="material-symbols-outlined">finance_mode</mat-icon>
      </button>

      <button
        class="action-btn deploy-btn"
        [matTooltip]="MAPPING_TYPE['actives_instances'].title"
      >
        <mat-icon class="material-symbols-outlined">{{
          MAPPING_TYPE["actives_instances"].icon
        }}</mat-icon>
      </button>

      <button
        class="env-trigger"
        [matMenuTriggerFor]="envMenu"
        [ngClass]="'env-' + currentEnv.class"
      >
        <span class="env-letter">{{
          currentEnv.label.charAt(0) | uppercase
        }}</span>
        <span class="env-label">{{ currentEnv.label | uppercase }}</span>
        <mat-icon>expand_more</mat-icon>
      </button>

      <mat-menu #envMenu="matMenu" class="env-menu-panel">
        <button
          mat-menu-item
          *ngFor="let env of envItems"
          (click)="selectEnv(env)"
        >
          <mat-icon
            [style.visibility]="currentEnv.id === env.id ? 'visible' : 'hidden'"
            >check</mat-icon
          >
          <span>{{ env.label | uppercase }}</span>
        </button>
      </mat-menu>

      <div class="nav-divider"></div>

      <a
        class="action-btn github-btn"
        href="https://github.com/orgs/oneteme/projects/17"
        target="_blank"
        matTooltip="Contribuer sur GitHub"
      >
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
          />
        </svg>
      </a>
    </div>
  </div>
</nav>
